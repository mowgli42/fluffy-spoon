# Self-Hosted Recipe Management System

## Folder Structure

```
recipe-system/
├── schemas/
│   └── recipe.xsd                    # XSD schema definition
├── stylesheets/
│   ├── recipe-detail.xsl            # Individual recipe view
│   └── recipe-list.xsl              # Recipe list/index view
├── recipes/
├── assets/
│   ├── css/
│   │   └── styles.css               # Additional styling
│   ├── js/
│   │   └── search.js                # Client-side search functionality
│   └── images/
│       └── recipes/                 # Recipe photos
├── index/
│   ├── recipe-index.xml             # Master index of all recipes
│   └── tag-index.xml                # Tag-based index
├── web/
│   ├── index.html                   # Main landing page
│   ├── browse.html                  # Browse recipes by category
│   └── search.html                  # Search interface
└── scripts/
    ├── generate-index.py            # Index generation script
    └── validate-recipes.py          # Schema validation script
```

## Tagging Strategy

### Tag Categories

1. **Meal Type**: breakfast, lunch, dinner, snack, dessert, appetizer
1. **Cuisine**: italian, mexican, chinese, indian, thai, french, american, mediterranean
1. **Dietary**: vegetarian, vegan, gluten-free, dairy-free, keto, paleo, low-carb
1. **Cooking Method**: baked, grilled, fried, slow-cooker, instant-pot, one-pot, no-cook
1. **Season**: spring, summer, fall, winter, holiday
1. **Difficulty**: quick, easy, medium, hard, advanced
1. **Occasion**: weeknight, weekend, party, potluck, meal-prep, date-night
1. **Main Ingredient**: beef, chicken, pork, fish, pasta, rice, beans, vegetables
1. **Flavor Profile**: spicy, sweet, savory, tangy, comfort-food, light, hearty
1. **Special Needs**: kid-friendly, budget, leftovers, make-ahead, freezer-friendly

## Self-Hosted Implementation Options

### Option 1: Static Site with Client-Side Search (Simplest)

**Technology Stack:**

- Static HTML/CSS/JavaScript
- XML/XSLT for recipe rendering
- JavaScript for search and filtering
- Can host on any web server (Apache, Nginx, or even Python’s SimpleHTTPServer)

**Advantages:**

- No server-side processing required
- Fast and lightweight
- Easy to backup and migrate
- Works offline

**Implementation:**

1. Generate a JSON index from all XML recipes
1. Use JavaScript to search/filter the index
1. Dynamically load and transform XML with XSLT in browser

### Option 2: Python Flask Application (Recommended)

**Technology Stack:**

- Python Flask web framework
- lxml for XML processing and validation
- SQLite for search indexing
- Full-text search capabilities

**Advantages:**

- Better search performance
- Server-side validation
- API endpoints for mobile apps
- User features (favorites, ratings, comments)

**Key Features:**

- REST API for recipe CRUD operations
- Full-text search with filters
- Tag-based browsing
- Automatic index generation
- Schema validation on upload

### Option 3: Docker Container Solution (Most Portable)

**Technology Stack:**

- Nginx web server
- Python backend for search
- Docker for easy deployment
- Optional: Elasticsearch for advanced search

**Advantages:**

- Easy deployment anywhere
- Consistent environment
- Scalable
- Include all dependencies

## Master Index File Structure

### recipe-index.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<recipeIndex>
  <recipe>
    <id>classic-chili</id>
    <title>Classic Beef Chili</title>
    <path>recipes/main-courses/beef/classic-chili.xml</path>
    <category>main-courses</category>
    <subcategory>beef</subcategory>
    <tags>
      <tag>comfort-food</tag>
      <tag>one-pot</tag>
      <tag>spicy</tag>
    </tags>
    <metadata>
      <servings>6</servings>
      <totalTime>105</totalTime>
      <difficulty>medium</difficulty>
    </metadata>
    <lastModified>2024-12-19</lastModified>
  </recipe>
  <!-- More recipes... -->
</recipeIndex>
```

## Search Implementation

### Client-Side Search (search.js)

```javascript
// Load recipe index
// Filter by tags, ingredients, title
// Sort by various criteria
// Display results dynamically
```

### Features:

- Multi-tag filtering (AND/OR logic)
- Ingredient search
- Time-based filtering (quick meals, slow-cooker, etc.)
- Difficulty filtering
- Dietary restriction filtering
- Free-text search in titles and descriptions

## Deployment Instructions

### Quick Start (Static):

1. Clone/download folder structure
1. Place XML recipes in appropriate folders
1. Run `python scripts/generate-index.py`
1. Start web server: `python -m http.server 8000`
1. Open browser to `http://localhost:8000`

### Docker Deployment:

1. Build container: `docker build -t recipe-app .`
1. Run: `docker run -p 8080:80 recipe-app`
1. Access at `http://localhost:8080`

### Backup Strategy:

- All recipes are plain XML files - easy to backup
- Version control with Git recommended
- Automatic backups to cloud storage
- Export/import functionality

## Additional Features to Consider

1. **Recipe Import/Export**: Convert from/to other formats (JSON, Markdown)
1. **Print Stylesheets**: CSS for printer-friendly recipe cards
1. **Meal Planning**: Weekly meal planner integration
1. **Shopping Lists**: Auto-generate from selected recipes
1. **Scaling Calculator**: Adjust ingredient quantities
1. **Nutrition Calculator**: Integration with nutrition APIs
1. **User Annotations**: Personal notes and modifications
1. **Recipe Ratings**: Star ratings and reviews
1. **Photo Gallery**: Multiple photos per recipe
1. **Mobile App**: Progressive Web App (PWA) for offline access